/*
 * signals.c
 *
 *  Created on: Dec 10, 2025
 *      Author: andre
 */

#include <arm_math.h>
#include "signals.h"

static const float32_t gen_signal[SIG_GEN_LEN] = {
    0.0f, 0.113595448f, 0.224888906f, 0.331624955f, 0.431640595f, 0.522909105f, 0.603580713f, 0.672020793f,
    0.726842284f, 0.766934335f, 0.791484356f, 0.799994946f, 0.792293549f, 0.768536329f, 0.729204655f, 0.675095677f,
    0.607305765f, 0.527208686f, 0.436427921f, 0.33680281f, 0.230352208f, 0.119233668f, 0.0056990399f, -0.107951276f,
    -0.219414115f, -0.326430351f, -0.426831454f, -0.518582761f, -0.599825025f, -0.668911874f, -0.724442959f, -0.76529336f,
    -0.79063499f, -0.799954355f, -0.793062568f, -0.770099342f, -0.73153013f, -0.67813623f, -0.611000061f, -0.531481683f,
    -0.441192836f, -0.34196347f, -0.235803872f, -0.124866031f, -0.0113977902f, 0.102301799f, 0.213927865f, 0.321219414f,
    0.422000647f, 0.51423043f, 0.596038997f, 0.665768981f, 0.722006977f, 0.763613462f, 0.78974551f, 0.799873114f,
    0.793791354f, 0.771623313f, 0.733818233f, 0.681142211f, 0.614663243f, 0.53572768f, 0.445935488f, 0.347107112f,
    0.241243914f, 0.130491868f, 0.0170953907f, -0.0966475233f, -0.20843187f, -0.31599161f, -0.417148501f, -0.509851813f,
    -0.592222393f, -0.662592113f, -0.719534338f, -0.76189512f, -0.788815856f, -0.799751341f, -0.794479847f, -0.773108065f,
    -0.736069202f, -0.684114158f, -0.618295252f, -0.539946437f, -0.45065555f, -0.352232784f, -0.246671349f, -0.136111081f,
    -0.0227932669f, 0.0909879655f, 0.202923805f, 0.31074816f, 0.41227445f, 0.505447328f, 0.588376522f, 0.659381807f,
    0.717025161f, 0.760137677f, 0.787846327f, 0.799588978f, 0.795127988f, 0.774553835f, 0.738282859f, 0.6870507f,
    0.62189585f, 0.544137776f, 0.455353349f, 0.357339919f, 0.252086252f, 0.141723379f, 0.0284892228f, -0.0853237808f,
    -0.197406203f, -0.30548963f, -0.407380819f, -0.501016557f, -0.584500313f, -0.656138062f, -0.714479923f, -0.758342147f,
    -0.786836624f, -0.799386024f, -0.795735776f, -0.775960088f, -0.740459025f, -0.689953089f, -0.625465333f, -0.548301578f,
    -0.460027426f, -0.362429589f, -0.2574884f, -0.147327751f, -0.0341829732f, 0.0796545148f, 0.191879302f, 0.300214171f,
    0.402466536f, 0.496561587f, 0.580593884f, 0.652860582f, 0.71189779f, 0.756507635f, 0.785787284f, 0.79914254f,
    0.796303332f, 0.777326763f, 0.742597938f, 0.692819715f, 0.629002213f, 0.552436948f, 0.464677542f, 0.367501557f,
    0.26287818f, 0.152926132f, 0.0398765132f, -0.0739827305f, -0.186341196f, -0.294923484f, -0.397530526f, -0.492080212f,
    -0.576659083f, -0.649550855f, -0.709279478f, -0.754634798f, -0.784697711f, -0.798858523f, -0.796830237f, -0.778654039f,
    -0.744698584f, -0.695651948f, -0.632508039f, -0.556545377f, -0.469305277f, -0.372553498f, -0.268253177f, -0.15851526f,
    -0.0455680266f, 0.0683056638f, 0.180795118f, 0.289620668f, 0.392574281f, 0.487573922f, 0.572693944f, 0.646208107f,
    0.706625223f, 0.752724111f, 0.78356868f, 0.798533857f, 0.79731679f, 0.779942453f, 0.746761978f, 0.698448122f,
    0.635980844f, 0.560625553f, 0.473909229f, 0.377587885f, 0.273614585f, 0.164096355f, 0.051255703f, -0.0626251325f,
    -0.175238356f, -0.284300327f, -0.387598157f, -0.483043998f, -0.56870079f, -0.642831743f, -0.703936517f, -0.750774682f,
    -0.782399595f, -0.798168838f, -0.79776299f, -0.781190574f, -0.748787522f, -0.701209605f, -0.639421403f, -0.564677298f,
    -0.478487939f, -0.382601798f, -0.278963536f, -0.169670612f, -0.0569423102f, 0.0569429398f, 0.169674218f, 0.278965563f,
    0.382603675f, 0.478488415f, 0.564678848f, 0.639423609f, 0.701210678f, 0.748787701f, 0.781190753f, 0.797763288f,
    0.7981686f, 0.782399118f, 0.750774443f, 0.703935504f, 0.642829537f, 0.568698227f, 0.4830423f, 0.38759762f,
    0.284298301f, 0.175234765f, 0.0626260191f, -0.0512578599f, -0.164099976f, -0.273616612f, -0.377588451f, -0.473908514f,
    -0.560627103f, -0.635982215f, -0.698449194f, -0.746762216f, -0.779942214f, -0.797317088f, -0.798533738f, -0.783568263f,
    -0.752723873f, -0.70662564f, -0.646205962f, -0.572692454f, -0.487573385f, -0.392573744f, -0.28961581f, -0.180791512f,
    -0.0683035105f, 0.0455686599f, 0.15851739f, 0.268256664f, 0.372556776f, 0.469307035f, 0.556546867f, 0.632508457f,
    0.695653796f, 0.744698822f, 0.778654814f, 0.796830416f, 0.798858404f, 0.784697592f, 0.754635036f, 0.709278524f,
    0.649549544f, 0.576657593f, 0.492079735f, 0.39752996f, 0.294921488f, 0.18633908f, 0.0739805698f, -0.0398771465f,
    -0.152926758f, -0.262880236f, -0.367503464f, -0.464679301f, -0.552438438f, -0.629004419f, -0.692821562f, -0.74259758f,
    -0.77732724f, -0.796303391f, -0.799142361f, -0.785786569f, -0.75650692f, -0.711896837f, -0.652860165f, -0.580591381f,
    -0.49656111f, -0.402463347f, -0.300212145f, -0.191877201f, -0.0796538815f, 0.0341836065f, 0.147331372f, 0.257490456f,
    0.362431496f, 0.460027933f, 0.548301995f, 0.625466704f, 0.689954221f, 0.740459859f, 0.775960207f, 0.795735836f,
    0.799385965f, 0.786836267f, 0.758341491f, 0.71447897f, 0.656137645f, 0.584497809f, 0.501017272f, 0.407378972f,
    0.305487603f, 0.197402626f, 0.0853201151f, -0.0284913834f, -0.141725525f, -0.252087593f, -0.357343882f, -0.45535326f,
    -0.544139922f, -0.621897161f, -0.687051773f, -0.738283396f, -0.774553776f, -0.795128286f, -0.799588919f, -0.787846029f,
    -0.760137498f, -0.717024863f, -0.659380138f, -0.588374555f, -0.505445659f, -0.412271321f, -0.310744733f, -0.202923939f,
    -0.0909880921f, 0.0227946639f, 0.136112452f, 0.246671945f, 0.352235407f, 0.450657994f, 0.539950311f, 0.618294179f,
    0.684114516f, 0.736069441f, 0.773108065f, 0.794480085f, 0.799751341f, 0.7888152f, 0.761893928f, 0.719533026f,
    0.66259259f, 0.592223525f, 0.509850681f, 0.417147934f, 0.315988928f, 0.208429053f, 0.0966453776f, -0.0170998406f,
    -0.130495504f, -0.241243795f, -0.347106308f, -0.445937306f, -0.535728693f, -0.614663661f, -0.681144118f, -0.733819366f,
    -0.77162385f, -0.79379195f, -0.799873114f, -0.78974545f, -0.763613641f, -0.722006023f, -0.665768027f, -0.596038282f,
    -0.514227569f, -0.421998173f, -0.321214288f, -0.213929459f, -0.102300785f, 0.0113980444f, 0.124865904f, 0.235806271f,
    0.341965079f, 0.441196531f, 0.531484485f, 0.611001968f, 0.678135991f, 0.731530845f, 0.770099759f, 0.793062687f,
    0.799954295f, 0.790634573f, 0.765292764f, 0.724441111f, 0.668909669f, 0.599824846f, 0.518583f, 0.426829636f,
    0.32642889f, 0.219413146f, 0.107947998f, -0.00570177333f, -0.119235992f, -0.230351001f, -0.336803764f, -0.436428308f,
    -0.527208745f, -0.607307315f, -0.675096631f, -0.729206443f, -0.768537343f, -0.792293966f, -0.799994946f, -0.791484535f,
    -0.766933918f, -0.726841986f, -0.672019005f, -0.603578985f, -0.522907495f, -0.43163681f, -0.331621379f, -0.224888638f,
    -0.113595761f};

/**
 * @brief signals_get_sample
 *
 * @return float32_t
 */
float32_t signals_get_sample(void)
{
  static int index = 0;

  float32_t sig = gen_signal[index];
  index = ((index + 1) % SIG_GEN_LEN);

  return sig;
}
